-- ==============================================================
-- Generated by Vitis HLS v2024.2
-- Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
-- Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.
-- ==============================================================

library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.numeric_std.all;

entity activation_accelerator_round_float32_to_bf16_ieee is
port (
    ap_ready : OUT STD_LOGIC;
    x_in : IN STD_LOGIC_VECTOR (31 downto 0);
    ap_return : OUT STD_LOGIC_VECTOR (15 downto 0);
    ap_rst : IN STD_LOGIC );
end;


architecture behav of activation_accelerator_round_float32_to_bf16_ieee is 
    constant ap_const_logic_1 : STD_LOGIC := '1';
    constant ap_const_boolean_1 : BOOLEAN := true;
    constant ap_const_lv32_10 : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000010000";
    constant ap_const_lv32_1F : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000011111";
    constant ap_const_lv32_17 : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000010111";
    constant ap_const_lv32_1E : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000011110";
    constant ap_const_lv23_0 : STD_LOGIC_VECTOR (22 downto 0) := "00000000000000000000000";
    constant ap_const_lv31_7F800000 : STD_LOGIC_VECTOR (30 downto 0) := "1111111100000000000000000000000";
    constant ap_const_lv32_16 : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000010110";
    constant ap_const_lv7_0 : STD_LOGIC_VECTOR (6 downto 0) := "0000000";
    constant ap_const_lv32_11 : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000010001";
    constant ap_const_lv1_1 : STD_LOGIC_VECTOR (0 downto 0) := "1";
    constant ap_const_lv16_8000 : STD_LOGIC_VECTOR (15 downto 0) := "1000000000000000";
    constant ap_const_lv32_F : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000001111";
    constant ap_const_lv32_7 : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000000111";
    constant ap_const_lv32_E : STD_LOGIC_VECTOR (31 downto 0) := "00000000000000000000000000001110";
    constant ap_const_lv15_7F80 : STD_LOGIC_VECTOR (14 downto 0) := "111111110000000";
    constant ap_const_lv1_0 : STD_LOGIC_VECTOR (0 downto 0) := "0";
    constant ap_const_logic_0 : STD_LOGIC := '0';

attribute shreg_extract : string;
    signal fbits_fu_62_p1 : STD_LOGIC_VECTOR (31 downto 0);
    signal tmp_fu_92_p4 : STD_LOGIC_VECTOR (7 downto 0);
    signal exp_field_fu_102_p3 : STD_LOGIC_VECTOR (30 downto 0);
    signal full_mant_fu_66_p1 : STD_LOGIC_VECTOR (22 downto 0);
    signal trunc_ln32_1_fu_116_p4 : STD_LOGIC_VECTOR (6 downto 0);
    signal icmp_ln36_fu_126_p2 : STD_LOGIC_VECTOR (0 downto 0);
    signal icmp_ln36_1_fu_132_p2 : STD_LOGIC_VECTOR (0 downto 0);
    signal tmp_1_fu_144_p4 : STD_LOGIC_VECTOR (14 downto 0);
    signal and_ln36_fu_138_p2 : STD_LOGIC_VECTOR (0 downto 0);
    signal ret_1_fu_154_p3 : STD_LOGIC_VECTOR (15 downto 0);
    signal ret_fu_74_p4 : STD_LOGIC_VECTOR (15 downto 0);
    signal lower_fu_70_p1 : STD_LOGIC_VECTOR (15 downto 0);
    signal round_up_fu_84_p3 : STD_LOGIC_VECTOR (0 downto 0);
    signal tmp_4_fu_176_p3 : STD_LOGIC_VECTOR (0 downto 0);
    signal icmp_ln48_fu_170_p2 : STD_LOGIC_VECTOR (0 downto 0);
    signal round_up_1_fu_184_p2 : STD_LOGIC_VECTOR (0 downto 0);
    signal empty_fu_190_p2 : STD_LOGIC_VECTOR (0 downto 0);
    signal zext_ln58_fu_196_p1 : STD_LOGIC_VECTOR (15 downto 0);
    signal rounded_fu_200_p2 : STD_LOGIC_VECTOR (15 downto 0);
    signal tmp_2_fu_206_p4 : STD_LOGIC_VECTOR (7 downto 0);
    signal new_exp_fu_216_p3 : STD_LOGIC_VECTOR (14 downto 0);
    signal tmp_5_fu_230_p3 : STD_LOGIC_VECTOR (0 downto 0);
    signal icmp_ln63_fu_224_p2 : STD_LOGIC_VECTOR (0 downto 0);
    signal res_fu_238_p3 : STD_LOGIC_VECTOR (15 downto 0);
    signal icmp_ln31_fu_110_p2 : STD_LOGIC_VECTOR (0 downto 0);
    signal ret_2_fu_162_p3 : STD_LOGIC_VECTOR (15 downto 0);
    signal select_ln63_fu_246_p3 : STD_LOGIC_VECTOR (15 downto 0);
    signal ap_ce_reg : STD_LOGIC;


begin



    and_ln36_fu_138_p2 <= (icmp_ln36_fu_126_p2 and icmp_ln36_1_fu_132_p2);
    ap_ready <= ap_const_logic_1;
    ap_return <= 
        ret_2_fu_162_p3 when (icmp_ln31_fu_110_p2(0) = '1') else 
        select_ln63_fu_246_p3;
    empty_fu_190_p2 <= (round_up_1_fu_184_p2 or icmp_ln48_fu_170_p2);
    exp_field_fu_102_p3 <= (tmp_fu_92_p4 & ap_const_lv23_0);
    fbits_fu_62_p1 <= x_in;
    full_mant_fu_66_p1 <= fbits_fu_62_p1(23 - 1 downto 0);
    icmp_ln31_fu_110_p2 <= "1" when (exp_field_fu_102_p3 = ap_const_lv31_7F800000) else "0";
    icmp_ln36_1_fu_132_p2 <= "1" when (trunc_ln32_1_fu_116_p4 = ap_const_lv7_0) else "0";
    icmp_ln36_fu_126_p2 <= "0" when (full_mant_fu_66_p1 = ap_const_lv23_0) else "1";
    icmp_ln48_fu_170_p2 <= "1" when (unsigned(lower_fu_70_p1) > unsigned(ap_const_lv16_8000)) else "0";
    icmp_ln63_fu_224_p2 <= "1" when (new_exp_fu_216_p3 = ap_const_lv15_7F80) else "0";
    lower_fu_70_p1 <= fbits_fu_62_p1(16 - 1 downto 0);
    new_exp_fu_216_p3 <= (tmp_2_fu_206_p4 & ap_const_lv7_0);
    res_fu_238_p3 <= (tmp_5_fu_230_p3 & ap_const_lv15_7F80);
    ret_1_fu_154_p3 <= (tmp_1_fu_144_p4 & ap_const_lv1_1);
    ret_2_fu_162_p3 <= 
        ret_1_fu_154_p3 when (and_ln36_fu_138_p2(0) = '1') else 
        ret_fu_74_p4;
    ret_fu_74_p4 <= fbits_fu_62_p1(31 downto 16);
    round_up_1_fu_184_p2 <= (tmp_4_fu_176_p3 and round_up_fu_84_p3);
    round_up_fu_84_p3 <= fbits_fu_62_p1(16 downto 16);
    rounded_fu_200_p2 <= std_logic_vector(unsigned(zext_ln58_fu_196_p1) + unsigned(ret_fu_74_p4));
    select_ln63_fu_246_p3 <= 
        res_fu_238_p3 when (icmp_ln63_fu_224_p2(0) = '1') else 
        rounded_fu_200_p2;
    tmp_1_fu_144_p4 <= fbits_fu_62_p1(31 downto 17);
    tmp_2_fu_206_p4 <= rounded_fu_200_p2(14 downto 7);
    tmp_4_fu_176_p3 <= fbits_fu_62_p1(15 downto 15);
    tmp_5_fu_230_p3 <= rounded_fu_200_p2(15 downto 15);
    tmp_fu_92_p4 <= fbits_fu_62_p1(30 downto 23);
    trunc_ln32_1_fu_116_p4 <= fbits_fu_62_p1(22 downto 16);
    zext_ln58_fu_196_p1 <= std_logic_vector(IEEE.numeric_std.resize(unsigned(empty_fu_190_p2),16));
end behav;
